(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1e677ac1"],{"78e7":function(e,t,o){"use strict";o("d786")},"89dc":function(e,t,o){},"9e8e":function(e,t,o){"use strict";o.r(t);var n=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"app-container"},[o("el-row",{attrs:{display:"margin-top:10px"}},[o("el-input",{staticStyle:{display:"inline-table",width:"20%",float:"left"},attrs:{placeholder:"请输入添加人名"},model:{value:e.input_bookname,callback:function(t){e.input_bookname=t},expression:"input_bookname"}}),o("el-input",{staticStyle:{display:"inline-table",width:"20%",float:"left"},attrs:{placeholder:"请输入金额"},model:{value:e.input_phone,callback:function(t){e.input_phone=t},expression:"input_phone"}}),o("el-input",{staticStyle:{display:"inline-table",width:"20%",float:"left"},attrs:{placeholder:"请输入地址"},model:{value:e.input_relation,callback:function(t){e.input_relation=t},expression:"input_relation"}}),o("el-input",{staticStyle:{display:"inline-table",width:"20%",float:"left"},attrs:{placeholder:"请输入关系"},model:{value:e.input_address,callback:function(t){e.input_address=t},expression:"input_address"}}),o("el-input",{staticStyle:{display:"inline-table",width:"20%",float:"left"},attrs:{placeholder:"请输入电话"},model:{value:e.input_money,callback:function(t){e.input_money=t},expression:"input_money"}}),o("el-button",{staticStyle:{float:"left",margin:"2px"},attrs:{type:"primary"},on:{click:function(t){return e.addUser()}}},[e._v("新增")])],1),o("el-row",[o("el-table",{attrs:{data:e.list_book,"element-loading-text":"Loading",border:"",fit:"","highlight-current-row":""}},[o("el-table-column",{attrs:{align:"center",label:"序号",width:"95"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.pk)+" ")]}}])}),o("el-table-column",{attrs:{prop:"book_name",align:"center",label:"姓名"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.fields.book_name)+" ")]}}])}),o("el-table-column",{attrs:{prop:"money",align:"center",label:"份子喜钱"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.fields.money)+" ")]}}])}),o("el-table-column",{attrs:{prop:"address",align:"center",label:"地址"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.fields.address)+" ")]}}])}),o("el-table-column",{attrs:{prop:"relation",align:"center",label:"关系"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.fields.relation)+" ")]}}])}),o("el-table-column",{attrs:{prop:"phone",align:"center",label:"电话"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.fields.phone)+" ")]}}])}),o("el-table-column",{attrs:{align:"center",label:"时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("span",[e._v(e._s(t.row.fields.add_time))])]}}])}),o("el-table-column",{attrs:{align:"center",width:"190px",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-button",{staticStyle:{float:"left",margin:"5px"},attrs:{type:"primary"},on:{click:function(o){return e.deleteBook(t.row.fields.book_name)}}},[e._v("删除")]),o("el-button",{staticStyle:{float:"right",margin:"5px"},attrs:{type:"primary"},nativeOn:{click:function(o){return o.preventDefault(),e.editRow(t.row)}}},[e._v("修改")])]}}])})],1)],1),e.showDialog?o("dialog-component",{ref:"dialogComponent",attrs:{"dialog-title":e.dialogTitle,"item-info":e.tableItem},on:{closeDialog:e.closeDialog}}):e._e()],1)},a=[],i=o("b775");function l(){return Object(i["a"])({url:"/api/show_books",method:"get"})}function s(e,t,o,n,a){return Object(i["a"])({url:"/api/add_book",method:"get",params:{book_name:e,phone:t,relation:o,address:n,money:a}})}function r(e){return Object(i["a"])({url:"/api/delete_book",method:"get",params:{book_name:e}})}var u=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("transition",{attrs:{name:"dialog-fade"}},[e.showDialog?o("el-dialog",{staticClass:"dialog-component",attrs:{title:e.dialogTitle,visible:e.showDialog,width:"500px"},on:{"update:visible":function(t){e.showDialog=t},close:function(t){return e.closeDialog(0)}}},[o("el-form",{ref:"formInfo",staticClass:"demo-form-inline",attrs:{model:e.formInfo,"label-width":"80px"}},[o("el-form-item",{attrs:{label:"姓名：",prop:"book_name",required:""}},[o("el-input",{model:{value:e.formInfo.book_name,callback:function(t){e.$set(e.formInfo,"book_name",t)},expression:"formInfo.book_name"}})],1),o("el-form-item",{attrs:{label:"金额：",prop:"money",required:""}},[o("el-input",{model:{value:e.formInfo.money,callback:function(t){e.$set(e.formInfo,"money",t)},expression:"formInfo.money"}})],1),o("el-form-item",{attrs:{label:"地址：",prop:"address",required:""}},[o("el-input",{model:{value:e.formInfo.address,callback:function(t){e.$set(e.formInfo,"address",t)},expression:"formInfo.address"}})],1),o("el-form-item",{attrs:{label:"关系：",prop:"relation",required:""}},[o("el-input",{model:{value:e.formInfo.relation,callback:function(t){e.$set(e.formInfo,"relation",t)},expression:"formInfo.relation"}})],1),o("el-form-item",{attrs:{label:"电话：",prop:"phone",required:""}},[o("el-input",{model:{value:e.formInfo.phone,callback:function(t){e.$set(e.formInfo,"phone",t)},expression:"formInfo.phone"}})],1),o("el-form-item",{staticStyle:{"text-align":"right"}},[o("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm("formInfo")}}},[e._v("确定")]),o("el-button",{on:{click:function(t){return e.closeDialog(0)}}},[e._v("取消")])],1)],1)],1):e._e()],1)},c=[],f={name:"DialogComponent",props:{dialogTitle:{type:String,default:"添加人员"},itemInfo:{type:Object,default:function(){return{}}}},data:function(){return{showDialog:!1,formInfo:JSON.parse(JSON.stringify(this.itemInfo))}},methods:{submitForm:function(e){var t=this;Object.assign(t.formInfo,{});t.$refs[e].validate((function(e){if(!e)return!1;t.$message({message:"操作成功！",type:"success"}),t.closeDialog(1)}))},closeDialog:function(e){this.$refs["formInfo"].resetFields(),this.showDialog=!1,this.$emit("closeDialog",e)}}},d=f,p=(o("78e7"),o("2877")),m=Object(p["a"])(d,u,c,!1,null,"419adf5a",null),h=m.exports,b={name:"DialogDemo",components:{DialogComponent:h},filters:{statusFilter:function(e){var t={published:"success",draft:"gray",deleted:"danger"};return t[e]}},data:function(){return{tableLoading:!1,showDialog:!1,dialogTitle:"添加客人",tableData:[],tableItem:{id:"",book_name:"",money:"",address:"",relation:"",phone:""},list_book:null,listLoading:!0,input_bookname:"",input_phone:"",input_relation:"",input_address:"",input_money:"",output_bookname:""}},mounted:function(){this.fetchData()},created:function(){this.getList()},methods:{fetchData:function(){var e=this;e.tableLoading=!0,e.tableData=[{book_name:"wxm",money:"100",phone:"17551017364",relation:"pengyou",address:"qianshan"},{book_name:"wam",money:"100",phone:"17551017364",relation:"pengyou",address:"qianshan"},{book_name:"wbm",money:"100",phone:"17551017364",relation:"pengyou",address:"qianshan"},{book_name:"wcm",money:"100",phone:"17551017364",relation:"pengyou",address:"qianshan"}],setTimeout((function(){e.tableLoading=!1}),1500)},addItem:function(){var e=this;this.tableItem={id:"",book_name:"",money:"",address:"",relation:"",phone:""},this.dialogTitle="添加人员",this.showDialog=!0,this.$nextTick((function(){e.$refs["dialogComponent"].showDialog=!0}))},editRow:function(e){var t=this;this.tableItem=e,this.dialogTitle="编辑人员",this.showDialog=!0,this.$nextTick((function(){t.$refs["dialogComponent"].showDialog=!0}))},closeDialog:function(e){e&&this.fetchData(),this.showDialog=!1},getList:function(){var e=this;this.listLoading=!0,l().then((function(t){0===t.error_num?(e.list_book=t["list"],e.listLoading=!1):(e.$message.error("查询客人信息失败"),console.log(t["msg"]))}))},deleteBook:function(e){var t=this;r(this.output_bookname=e).then((function(e){0===e.error_num?(t.$message({message:"删除客人成功",type:"success"}),console.log(e["msg"]),t.getList()):(t.$message.error("删除客人信息失败，请重试"),console.log(e["msg"]),t.getList())}))},addUser:function(){var e=this;s(this.input_bookname,this.input_money,this.input_address,this.input_relation,this.input_phone).then((function(t){0===t.error_num?(e.input_bookname="",e.input_money="",e.input_address="",e.input_phone="",e.input_relation="",e.$message({message:"新增客人成功",type:"success"}),console.log(t["msg"]),e.getList()):(e.$message.error("新增客人信息失败，请重试"),console.log(t["msg"]))}))}}},g=b,_=(o("cec7"),Object(p["a"])(g,n,a,!1,null,"260893c2",null));t["default"]=_.exports},cec7:function(e,t,o){"use strict";o("89dc")},d786:function(e,t,o){}}]);